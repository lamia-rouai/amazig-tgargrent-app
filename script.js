const defaultData = {
  "الجسم": [
    {
      "word": "أودم",
      "translation": "وجه"
    },
    {
      "word": "زاو",
      "translation": "شعر"
    },
    {
      "word": "أبلاو",
      "translation": "حاجب"
    },
    {
      "word": "طيط",
      "translation": "عين"
    },
    {
      "word": "تينجار",
      "translation": "أنف"
    },
    {
      "word": "إيمي",
      "translation": "فم"
    },
    {
      "word": "تيغماس",
      "translation": "أسنان"
    },
    {
      "word": "إيلس",
      "translation": "لسان"
    },
    {
      "word": "تاكرومت",
      "translation": "رقبة"
    },
    {
      "word": "فوش",
      "translation": "يد"
    },
    {
      "word": "دار",
      "translation": "رجل"
    }
  ],
  "الضمائر": [
    {
      "word": "نشين",
      "translation": "أنا"
    },
    {
      "word": "نشنا",
      "translation": "نحن"
    },
    {
      "word": "شكين",
      "translation": "أنت للمذكر"
    },
    {
      "word": "شمين",
      "translation": "أنت للمؤنث"
    },
    {
      "word": "نَتٌّا",
      "translation": "هو"
    },
    {
      "word": "نَتات",
      "translation": "هي"
    },
    {
      "word": "نَتنين",
      "translation": "هما"
    }
  ],
  "الأوقات": [
    {
      "word": "أشو",
      "translation": "يوم"
    },
    {
      "word": "سْمانت",
      "translation": "أسبوع"
    },
    {
      "word": "يور",
      "translation": "شهر"
    },
    {
      "word": "أسقاس",
      "translation": "سنة"
    },
    {
      "word": "غابسا",
      "translation": "الصباح"
    },
    {
      "word": "دقاس  G",
      "translation": "المساء"
    },
    {
      "word": "ضقيد G",
      "translation": "الليل"
    },
    {
      "word": "أسناط ",
      "translation": "الأمس"
    },
    {
      "word": "أشًّا",
      "translation": "الغد"
    },
    {
      "word": "ساعت",
      "translation": "ساعة"
    },
    {
      "word": "ازقن ساعات  G",
      "translation": "نصف ساعة"
    },
    {
      "word": "دقيقت",
      "translation": "دقيقة"
    },
    {
      "word": "ايمارو",
      "translation": "الأن"
    },
    {
      "word": "تفاصكا أشا",
      "translation": "العيد غدا"
    }
  ],
  "الأقارب": [
    {
      "word": "بابا",
      "translation": "الأب"
    },
    {
      "word": "نانا",
      "translation": "الأم"
    },
    {
      "word": "امٍِي / آرا",
      "translation": "الإبن "
    },
    {
      "word": "أمَّا",
      "translation": "الأخ"
    },
    {
      "word": "أوتْما",
      "translation": "الأخت"
    },
    {
      "word": "حَدْ",
      "translation": "الإنسان أو شخص ما"
    }
  ],
  "الأشياء": [
    {
      "word": "تافياست",
      "translation": "القارورة"
    }
  ],
  "الملابس": [
    {
      "word": "اسراويل",
      "translation": "السروال"
    },
    {
      "word": "تريكو",
      "translation": "القميص"
    },
    {
      "word": "الشورط",
      "translation": "الشورط"
    },
    {
      "word": "تريحيت",
      "translation": "الحذاء"
    },
    {
      "word": "انقاشير",
      "translation": "التقاشر"
    },
    {
      "word": "الربة",
      "translation": "الربة / الفستان"
    },
    {
      "word": "القفالي",
      "translation": "الأزرار"
    }
  ],
  "الأفعال": [
    {
      "word": "يوشد  ",
      "translation": "أتى - يأتي"
    },
    {
      "word": "يخش",
      "translation": "أحب / يحب"
    },
    {
      "word": "يتبي",
      "translation": "أخذ / يأخذ"
    },
    {
      "word": "يتفاتاش",
      "translation": "بحث / يبحث"
    },
    {
      "word": "ايتزا",
      "translation": "ترك / يترك"
    },
    {
      "word": "إيتاف",
      "translation": "وجد / يجد"
    },
    {
      "word": "إتازل / أزل",
      "translation": "جرى / يجري / إجري"
    },
    {
      "word": "أود",
      "translation": "جلب / يجلب / اجلب"
    },
    {
      "word": "يزار",
      "translation": "يرى / ينظر"
    },
    {
      "word": "يخش",
      "translation": "أراد / يريد"
    },
    {
      "word": "يتسول",
      "translation": "سأل / يسأل"
    },
    {
      "word": "يسغو / يساغ",
      "translation": "اشترى / يشتري"
    },
    {
      "word": "يتحوسا",
      "translation": "يشعر / يحس"
    },
    {
      "word": "يتاوض",
      "translation": "وصل / يصل"
    },
    {
      "word": "يشن",
      "translation": "عرف / يعرف"
    },
    {
      "word": "يتوش / أوشاش للأمر",
      "translation": "أعطى / يعطي"
    },
    {
      "word": "يخدم",
      "translation": "عمل / يعمل"
    },
    {
      "word": "يزووا",
      "translation": "غادر / يغادر / ذهب / يذهب"
    },
    {
      "word": "يتاشد",
      "translation": "جاء / يجيء"
    },
    {
      "word": "يسن",
      "translation": "عرف / يعرف"
    },
    {
      "word": "يناياك   / إيني = قل بصيغة الأمر",
      "translation": "قال / يقول"
    },
    {
      "word": "يكشب",
      "translation": "ملك / يملك"
    },
    {
      "word": "يتاف",
      "translation": "وجد / يجد"
    },
    {
      "word": "يزار",
      "translation": "نظر / ينظر"
    },
    {
      "word": "يتاغ",
      "translation": "حصل على  /  يحصل على"
    },
    {
      "word": "إيتقيما  / أقيم = إجلس",
      "translation": "جلس / يجلس"
    },
    {
      "word": "إتيرد / إرد ",
      "translation": "لبس / يلبس / إلبس"
    },
    {
      "word": "أزن",
      "translation": "أرسل"
    },
    {
      "word": "إياد",
      "translation": "تعال"
    },
    {
      "word": "آخا",
      "translation": "خذ"
    }
  ],
  "الحيوانات": [
    {
      "word": "أيدي",
      "translation": "الكلب أكرمكم الله"
    },
    {
      "word": "أغُول",
      "translation": "الحمار أكرمكم الله"
    },
    {
      "word": "أتْبير",
      "translation": "الحمام"
    },
    {
      "word": "أجديد",
      "translation": "عصفور"
    },
    {
      "word": "موص",
      "translation": "القط"
    }
  ],
  "في المنزل": [
    {
      "word": "تدارت",
      "translation": "المنزل"
    },
    {
      "word": "ايكومار",
      "translation": "الغرفة"
    },
    {
      "word": "كوزينة",
      "translation": "المطبخ"
    },
    {
      "word": "مورو",
      "translation": "الحائط"
    },
    {
      "word": "تاوورت",
      "translation": "الباب"
    },
    {
      "word": "التاقة",
      "translation": "النافذة"
    },
    {
      "word": "تَشونان",
      "translation": "السلم / الدرج"
    },
    {
      "word": "انج",
      "translation": "السطح"
    },
    {
      "word": "تالا",
      "translation": "الحنفية"
    },
    {
      "word": "اكات",
      "translation": "السرير"
    },
    {
      "word": "تيكيمت",
      "translation": "الوسادة"
    },
    {
      "word": "ادان",
      "translation": "الغطاء"
    },
    {
      "word": "طاولت",
      "translation": "الطاولة"
    }
  ],
  "الصفات": [
    {
      "word": "أيبها",
      "translation": "جميل"
    },
    {
      "word": "أجعلوك",
      "translation": "كبير"
    },
    {
      "word": "أكشيش",
      "translation": "صغير"
    },
    {
      "word": "يقوى",
      "translation": "شجاع"
    },
    {
      "word": "يحوى",
      "translation": "جبان"
    },
    {
      "word": "يقوى",
      "translation": "قوي"
    },
    {
      "word": "أجيوار",
      "translation": "سمين"
    },
    {
      "word": "أزداد",
      "translation": "رقيق"
    },
    {
      "word": "أزقرار G",
      "translation": "طويل"
    },
    {
      "word": "أقزول",
      "translation": "قصير"
    }
  ],
  "الأكل": [
    {
      "word": "إشُّو",
      "translation": "الطعام"
    },
    {
      "word": "إشْوا",
      "translation": "الشرب"
    },
    {
      "word": "أغروم / أفرشيش",
      "translation": "الخبز"
    }
  ],
  "كلمات أخرى": [
    {
      "word": "أمزداغ",
      "translation": "البلد"
    },
    {
      "word": "إسْلان",
      "translation": "العرس"
    },
    {
      "word": "تامورت",
      "translation": "الأرض"
    },
    {
      "word": "أدٌََرب",
      "translation": "الشارع"
    },
    {
      "word": "تامْزديقا  G",
      "translation": "المسجد"
    },
    {
      "word": "أمْزار",
      "translation": "المطر"
    },
    {
      "word": "إثران",
      "translation": "النجوم"
    },
    {
      "word": "تاصمودي",
      "translation": "البرد"
    },
    {
      "word": "آضُو",
      "translation": "الرياح"
    }
  ],
  "بعض الجمل المتكررة": [
    {
      "word": "اوشينا ماتا يوشد",
      "translation": "لا أدري إذا جا / مانعرف إذا جا"
    },
    {
      "word": "اوشينا إيلا دا",
      "translation": "لا أدري إذا كان هنا"
    },
    {
      "word": "سهود فوشك",
      "translation": "أنزل يديك"
    },
    {
      "word": "أو قار G",
      "translation": "لا ترمي"
    },
    {
      "word": "أزِل ناناك",
      "translation": "اجري لماماك"
    },
    {
      "word": "كش دارك",
      "translation": "انزع قدمك"
    }
  ],
  "الألوان": [
    {
      "word": "أزقاغ G",
      "translation": "الأحمر"
    },
    {
      "word": "أزيزاو",
      "translation": "الأخضر"
    },
    {
      "word": "أملال",
      "translation": "الأبيض"
    },
    {
      "word": "أغِقال G",
      "translation": "الأسود"
    },
    {
      "word": "أًوراغ",
      "translation": "الأصفر"
    },
    {
      "word": "أعزازي",
      "translation": "البنفسجي"
    }
  ],
  "الخضر": [
    {
      "word": "زاليم",
      "translation": "البصل"
    },
    {
      "word": "تيفسناغ",
      "translation": "الجزر"
    },
    {
      "word": "تيشرت",
      "translation": "الثوم"
    },
    {
      "word": "تاخلابت",
      "translation": "فلفل حار"
    }
  ],
  "الفواكه": [
    {
      "word": "أرمون",
      "translation": "الرمان"
    },
    {
      "word": "أضيل",
      "translation": "العنب"
    }
  ],
  "الأرقام": [
    {
      "word": "إقن G",
      "translation": "واحد"
    },
    {
      "word": "سن",
      "translation": "إثنان"
    }
  ],
  "الأواني": [
    {
      "word": "طبسي",
      "translation": "الصحن"
    },
    {
      "word": "تاغنجايت",
      "translation": "الملعقة"
    },
    {
      "word": "الموشي",
      "translation": "السكين"
    }
  ],
  "التحيات": [
    {
      "word": "ماكتلين",
      "translation": "كيف الحال"
    }
  ]
};


// تحميل البيانات من التخزين أو من البيانات المدمجة
let data = {};
if (localStorage.getItem("amazighData")) {
  data = JSON.parse(localStorage.getItem("amazighData"));
} else {
  data = defaultData;
  localStorage.setItem("amazighData", JSON.stringify(data));
  alert("📥 تم تحميل البيانات الافتراضية لأول مرة!");
}

  alert("لا توجد بيانات حالياً. يمكنك البدء بإضافة كلمات.");
}

const urlParams = new URLSearchParams(window.location.search);
const currentGroup = urlParams.get("group");

document.getElementById("groupTitle").textContent = currentGroup;
const wordList = document.getElementById("wordList");
const wordInput = document.getElementById("wordInput");
const translationInput = document.getElementById("translationInput");

function saveData() {
  localStorage.setItem("amazighData", JSON.stringify(data));
}

function renderWords() {
  wordList.innerHTML = "";
  const words = (data[currentGroup] || []);
  words.forEach((item, index) => {
    const row = document.createElement("div");
    row.className = "word-row";

    const translationField = document.createElement("input");
    translationField.value = item.translation;
    translationField.onchange = () =>
      updateWord(index, wordField.value.trim(), translationField.value.trim());

    const wordField = document.createElement("input");
    wordField.value = item.word;
    wordField.onchange = () =>
      updateWord(index, wordField.value.trim(), translationField.value.trim());

    row.appendChild(translationField);
    row.appendChild(wordField);
    wordList.appendChild(row);
  });
}

function updateWord(index, newWord, newTranslation) {
  const old = data[currentGroup][index];
  if (newWord === old.word && newTranslation === old.translation) return;

  const confirmEdit = confirm("هل تريد حقا تغيير الكلمة ؟");
  if (!confirmEdit) {
    renderWords();
    return;
  }

  data[currentGroup][index] = { word: newWord, translation: newTranslation };
  saveData();
  renderWords();
}

function addWord() {
  const word = wordInput.value.trim();
  const translation = translationInput.value.trim();
  if (!word || !translation) return;

  if (!data[currentGroup]) data[currentGroup] = [];
  data[currentGroup].push({ word, translation });
  saveData();

  wordInput.value = "";
  translationInput.value = "";
  renderWords();
}

renderWords();